(function(e){function t(t){for(var s,n,a=t[0],l=t[1],u=t[2],m=0,b=[];m<a.length;m++)n=a[m],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&b.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(b.length)b.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],s=!0,a=1;a<r.length;a++){var l=r[a];0!==o[l]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=r[0]))}return e}var s={},o={app:0},i=[];function n(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=s,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var c=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var s=r("85ec"),o=r.n(s);o.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"nav"}},[r("NavBar")],1),r("router-view")],1)},i=[],n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-navbar",{staticStyle:{"background-color":"#002496"},attrs:{toggleable:"lg",type:"dark"}},[s("b-navbar-brand",[s("img",{staticStyle:{width:"100px"},attrs:{src:r("bd3c")}})]),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-form",["Login"!==e.$route.name?s("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.logOut()}}},[e._v("Cerrar sesión")]):e._e()],1)],1)],1)],1)],1)},a=[],l={getters:{getAccessToken:function(){return localStorage.simAccessToken}},setters:{setAccessToken:function(e){localStorage.simAccessToken=e}},logOut:function(){localStorage.removeItem("simAccessToken")}},u={methods:{logOut:function(){l.logOut(),this.$router.push("/login")}}},c=u,m=r("2877"),b=Object(m["a"])(c,n,a,!1,null,null,null),d=b.exports,p={components:{NavBar:d}},g=p,v=(r("034f"),Object(m["a"])(g,o,i,!1,null,null,null)),f=v.exports,h=r("8c4f"),_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-row",[r("div",{staticClass:"col-md-4 col-lg-4 col-xl-4 col-sm-12 col-xs-12"},[r("span",{staticClass:"d-lg-none"},[e._v("Distribuidores:")]),e.distributors.length>1?r("div",[e.showForm?e._e():r("b-form-select",{attrs:{options:e.distributors},on:{change:e.getDistributorSims},model:{value:e.selectedDistributor,callback:function(t){e.selectedDistributor=t},expression:"selectedDistributor"}})],1):e._e(),1===e.distributors.length?r("span",[e._v("Cargando distribuidores...")]):e._e(),null!==e.selectedDistributor?r("div",{staticClass:"text-left"},[r("DistributorDetails",{attrs:{selectedDistributor:e.selectedDistributor}})],1):e._e(),r("br"),r("br"),r("b-row",[e.generatingGeneralReport?e._e():r("b-col",[e.showForm?e._e():r("b-button",{attrs:{variant:"primary"},on:{click:e.getGeneralReport}},[e._v("Ver Reporte General")])],1),e.generatingGeneralReport?r("b-col",[r("b-spinner",{staticClass:"text-center",attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1):e._e(),r("b-col",[e.showForm?e._e():r("b-button",{attrs:{variant:"success"},on:{click:e.toggleForm}},[e._v("Agregar Distribuidor")])],1)],1),r("br"),r("br"),r("DistributorForm",{attrs:{showForm:e.showForm,selectedDistributor:e.selectedDistributor},on:{toggleForm:e.toggleForm}})],1),r("div",{staticClass:"col-md-4 col-lg-4 col-xl-4 col-sm-10"},[r("NumbersList",{attrs:{sims:e.selectedSims}}),null===e.selectedDistributor?r("div",[r("p",[e._v("Elija un distribuidor")])]):e._e()],1),r("div",{staticClass:"col-md-4 col-lg-4 col-xl-4 col-sm-10"},[r("NumbersTextArea",{attrs:{showNumbersSpinner:e.showNumbersSpinner,selectedDistributor:e.selectedDistributor},on:{setSelectedDistributor:e.setSelectedDistributor,setShowNumbersSpinner:e.setShowNumbersSpinner,setSims:e.setSims}})],1)]),r("div")],1),r("div",[r("b-modal",{attrs:{id:"bv-modal-general-report","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("Reporte General")]},proxy:!0}])},[r("div",{staticClass:"d-block text-center"},[r("p",[r("strong",[e._v("SIMs Activados:")]),e._v(" "+e._s(e.result.activatedSims)+" ")]),r("p",[r("strong",[e._v("SIMs no activados:")]),e._v(" "+e._s(e.result.notActivatedSims)+" ")]),r("p",[r("strong",[e._v("Total SIMs:")]),e._v(" "+e._s(e.result.activatedSims+e.result.notActivatedSims)+" ")])]),r("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(t){return e.$bvModal.hide("bv-modal-general-report")}}},[e._v("Cerrar")])],1)],1)],1)},S=[],w=(r("4160"),r("b0c0"),r("159b"),r("5530")),D=r("2f62"),x=r("bc3a"),y=r.n(x),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.showForm?r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("b-form-group",{attrs:{id:"input-group-name",label:"Nombre:","label-for":"name-input"}},[r("b-form-input",{attrs:{id:"name-input",type:"text",required:"",placeholder:"Nombre"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-email",label:"Ingrese email:","label-for":"email-input"}},[r("b-form-input",{attrs:{id:"email-input",type:"email",required:"",placeholder:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("b-form-group",{attrs:{id:"input-group-phone-number",label:"Ingrese número telefónico:","label-for":"phone-number-input"}},[r("b-form-input",{attrs:{id:"phone-number-input",type:"tel",required:"",placeholder:"Ingrese número telefónico",maxlength:"10"},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}})],1),r("b-form-group",{attrs:{id:"input-group-city",label:"Ingrese ciudad:","label-for":"city-input"}},[r("b-form-input",{attrs:{id:"city-input",type:"text",required:"",placeholder:"Ciudad"},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})],1),e.showDistributorSpinner?e._e():r("b-row",[r("b-col",[r("b-button",{attrs:{variant:"danger"},on:{click:e.toggleForm}},[e._v("Cancelar")])],1),r("b-col",[r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Guardar")])],1)],1),e.showDistributorSpinner?r("b-row",[r("b-col",[r("b-spinner",{staticClass:"text-center",attrs:{variant:"primary",type:"grow",label:"Spinning"}}),r("h3",[e._v("Guardando Distribuidor")])],1)],1):e._e()],1):e._e()],1)},$=[],O={environment:"prod",environments:{dev:{baseUrl:"http://localhost:8080/api/v1"},prod:{baseUrl:"/api/v1"}}},N=O.environments[O.environment].baseUrl,C=N+"/user",M=C+"/login",A=N+"/distributor",E=N+"/sim",j=E+"/report",I=E+"/push",z=N+"/sim/distributor";function F(){var e={headers:{Authorization:"Bearer "+l.getters.getAccessToken()}};return e}var R={baseUrl:N,usersUrl:C,loginUrl:M,distributorsUrl:A,pushSIMsUrl:I,getSIMsUrl:E,distributorSims:z,getSIMsGeneralReport:j,getConfig:F},L={data:function(){return{form:{name:null,email:null,phone_number:null,city:null},showDistributorSpinner:!1}},props:{showForm:{type:Boolean,required:!0}},methods:Object(w["a"])({onSubmit:function(){var e=this;this.showDistributorSpinner=!0;var t=this.$bvModal,r=new Date,s=r.getTime();this.form["register_date"]=s;var o=this.form,i=R.getConfig();y.a.post(R.distributorsUrl,o,i).then((function(t){"success"===t.data.message.status?(e.$bvModal.msgBoxOk("Distribuidor agregado",{title:"Éxito",size:"lg",buttonSize:"lg",okVariant:"success"}),e.showDistributorSpinner=!1,e.getDistributors(e.$bvModal),e.newNumbers="",e.form={name:null,phone_number:null,email:null},e.$emit("toggleForm")):"Access token expired"===t.data.message?(e.showDistributorSpinner=!1,e.$bvModal.msgBoxOk("Sesión expirada. Vuelve a iniciar sesión.",{title:"Error",size:"lg",buttonSize:"lg",okVariant:"success"}).then((function(t){t&&(e.$router.push("/login"),l.logOut())}))):(e.showDistributorSpinner=!1,e.$bvModal.msgBoxOk("Ocurrió un error al guardar. Intenta de nuevo",{title:"Error",size:"lg",buttonSize:"lg",okVariant:"success"}))})).catch((function(e){t.msgBoxOk("Error al conectarse al servidor "+e,{title:"Error",size:"lg",buttonSize:"lg",okVariant:"danger"})})),this.showDistributorSpinner=!1},toggleForm:function(){this.showForm&&(this.form={name:null,phone_number:null,email:null},this.$emit("toggleForm"))}},Object(D["b"])(["getDistributors"]))},T=L,B=Object(m["a"])(T,k,$,!1,null,null,null),G=B.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("br"),r("br"),r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Nombre:")]),e._v(" "+e._s(e.selectedDistributor.name)+" ")]),r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Teléfono:")]),e._v(" "+e._s(e.selectedDistributor.phone_number)+" ")]),r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Email:")]),e._v(" "+e._s(e.selectedDistributor.email)+" ")]),r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Fecha registro:")]),e._v(" "+e._s(e.formatDate(e.selectedDistributor.register_date))+" ")]),r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Ciudad:")]),e._v(" "+e._s(e.selectedDistributor.city)+" ")]),r("p",[r("span",{staticClass:"font-weight-bold"},[e._v("Registrado por:")]),e._v(" "+e._s(e.selectedDistributor.registered_by.name)+" ")]),e.generatingDistributorReport?r("p",{staticClass:"text-center"},[r("b-spinner",{staticClass:"text-center",attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1):e._e(),e.generatingDistributorReport?e._e():r("p",[r("b-button",{on:{click:e.getDistributorReport}},[e._v("Reporte")])],1),r("div",[r("b-modal",{attrs:{id:"bv-modal-report","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("Reporte "+e._s(null!==e.selectedDistributor?e.selectedDistributor.name:""))]},proxy:!0}])},[r("div",{staticClass:"d-block text-center"},[r("p",[r("strong",[e._v("SIMs Activados:")]),e._v(" "+e._s(e.result.activatedSims)+" ")]),r("p",[r("strong",[e._v("SIMs no activados:")]),e._v(" "+e._s(e.result.notActivatedSims)+" ")]),r("p",[r("strong",[e._v("Total SIMs:")]),e._v(" "+e._s(e.result.activatedSims+e.result.notActivatedSims)+" ")])]),r("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(t){return e.$bvModal.hide("bv-modal-report")}}},[e._v("Cerrar")])],1)],1)])},q=[],U={error:function(e,t){e.msgBoxOk(t,{title:"Error",size:"lg",buttonSize:"lg",okVariant:"success"})}},P={data:function(){return{result:{activatedSims:0,notActivatedSims:0},generatingDistributorReport:!1}},props:{selectedDistributor:{type:Object,required:!0}},methods:{formatDate:function(e){var t=new Date(e);return t.toLocaleString()},getDistributorReport:function(){var e=this,t=this;t.generatingDistributorReport=!0;var r=R.getConfig();y.a.get(R.getSIMsGeneralReport+"/"+this.selectedDistributor._id,r).then((function(r){e.result=r.data.result,t.generatingDistributorReport=!1,e.$bvModal.show("bv-modal-report")})).catch((function(e){t.generatingDistributorReport=!1,U.error(e)}))}}},H=P,J=Object(m["a"])(H,V,q,!1,null,null,null),K=J.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[null!==e.sims&&void 0!==e.sims?r("b-list-group",[e.sims.length>0?r("div",{staticStyle:{"max-height":"300px",overflow:"scroll"}},[r("span",[e._v("Números:")]),e._l(e.sims,(function(t,s){return r("b-list-group-item",{key:t._id,staticStyle:{cursor:"pointer"},on:{click:function(r){return e.showSIMInfo(t)}}},[r("span",{style:t.active?"color: #8e8e8e;":""},[e._v(e._s(s+1)+".- "+e._s(t.phone_number))])])}))],2):e._e(),0===e.sims.length?r("div",[r("p",[e._v("No hay números para mostrar")])]):e._e()]):e._e(),r("b-modal",{attrs:{id:"bv-modal-sim","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("Información SIM")]},proxy:!0}])},[r("div",{staticClass:"d-block text-center"},[r("p",[r("strong",[e._v("Activado:")]),e._v(" "+e._s(e.selectedSim.active?"Sí":"No")+" ")]),r("p",[r("strong",[e._v("Número:")]),e._v(" "+e._s(e.selectedSim.phone_number)+" ")]),r("p",[r("strong",[e._v("Número de serie:")]),e._v(" "+e._s(e.selectedSim.serial_number)+" ")]),r("p",[r("strong",[e._v("Registrado por:")]),e._v(" "+e._s(void 0!==e.selectedSim.registered_by?e.selectedSim.registered_by.name:"")+" ")]),r("p",[r("strong",[e._v("Fecha de registro:")]),e._v(" "+e._s(e.formatDate(e.selectedSim.register_date))+" ")]),r("p",[r("strong",[e._v("Fecha de activación:")]),e._v(" "+e._s(void 0!==e.selectedSim.activation_date?e.formatDate(e.selectedSim.activation_date):"")+" ")])]),r("b-button",{staticClass:"mt-3",attrs:{block:""},on:{click:function(t){return e.$bvModal.hide("bv-modal-sim")}}},[e._v("Cerrar")])],1)],1)},W=[],X={data:function(){return{selectedSim:{}}},props:{sims:{required:!0}},methods:{showSIMInfo:function(e){this.selectedSim=e,this.$bvModal.show("bv-modal-sim")},formatDate:function(e){var t=new Date(e);return t.toLocaleString()}}},Y=X,Z=Object(m["a"])(Y,Q,W,!1,null,null,null),ee=Z.exports,te=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),r("b-form-textarea",{attrs:{id:"textarea",placeholder:"Escribe los números separados por coma",rows:"3","max-rows":"6"},model:{value:e.newNumbers,callback:function(t){e.newNumbers=t},expression:"newNumbers"}}),r("br"),e.showNumbersSpinner?r("b-row",[r("b-col",[r("b-spinner",{staticClass:"text-center",attrs:{variant:"primary",type:"grow",label:"Spinning"}}),r("h3",[e._v("Guardando Números")])],1)],1):e._e(),e.showNumbersSpinner?e._e():r("b-row",[r("b-col",[r("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.savePhoneNumbers()}}},[e._v("Agregar números")])],1)],1),r("br"),r("br"),e.wrongSims.length>0?r("b-row",[r("div",{staticStyle:{"max-height":"300px",width:"350px",overflow:"scroll","text-align":"left"}},[r("p",[e._v("Los siguientes números tienen errores:")]),r("ul",e._l(e.wrongSims,(function(t){return r("li",{key:t._id},[r("span",[e._v("Num: "+e._s(t.phone_number))]),r("br"),r("span",[e._v("SN: "+e._s(t.serial_number))]),r("br")])})),0)])]):e._e(),e.wrongSimsMongo.length>0?r("b-row",[r("div",{staticStyle:{"max-height":"500px",width:"350px",overflow:"scroll","text-align":"left"}},[r("p",[e._v("Los siguientes números ya se encuentran en la base de datos:")]),r("ul",e._l(e.wrongSimsMongo,(function(t){return r("li",{key:t.op._id},[r("span",[e._v("Num: "+e._s(t.op.phone_number))]),r("br"),r("span",[e._v("SN: "+e._s(t.op.serial_number))]),r("br")])})),0)]),r("b-container",[r("b-row",[r("b-col",[r("div",{staticClass:"text-align: center;"},[r("b-button",{on:{click:e.clearErrorArea}},[e._v("Limpiar Números")])],1)])],1)],1)],1):e._e()],1)},re=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-lg-none"},[r("br"),r("br"),r("span",[e._v("Agregar números:")])])}],se=(r("99af"),r("ac1f"),r("5319"),r("1276"),{data:function(){return{newNumbers:"",wrongSims:[],wrongSimsMongo:[]}},props:{showNumbersSpinner:{type:Boolean,required:!0},selectedDistributor:{required:!0}},methods:Object(w["a"])(Object(w["a"])({},Object(D["b"])(["getDistributors"])),{},{savePhoneNumbers:function(){var e=this;if(this.wrongSims=[],null!==this.selectedDistributor){var t=this.$bvModal,r=this;this.$emit("setShowNumbersSpinner",!0);for(var s,o=this.newNumbers.replace(/\s/g,""),i=o.split(","),n=[],a=[],u=new Date,c=u.getTime(),m=0;m<i.length-1;m+=2){var b={active:!1,phone_number:null,register_date:c,serial_number:null};s=/^\d+$/.test(i[m]),s&&10===i[m].length?(b.phone_number=i[m],s=/^\d+$/.test(i[m+1]),s&&19===i[m+1].length?(b.serial_number=i[m+1],n.push(b)):a.push({type:"serial",message:"SIM No: ".concat(m,". Longitud del número de serie ").concat(i[m+1]," debe ser de 19 y contener solo caracteres numéricos")})):a.push({type:"number",message:"SIM No: ".concat(m,". Longitud del número telef ").concat(i[m]," debe ser de 10 y contener solo caracteres numéricos")})}var d=R.getConfig();y.a.post(R.pushSIMsUrl+"/"+this.selectedDistributor._id,{sims:n},d).then((function(s){"success"===s.data.message.status?(e.$bvModal.msgBoxOk("Números guardados correctamente. Se ignoraron espacios vacíos y números erróneos",{title:"Éxito",size:"lg",buttonSize:"lg",okVariant:"success"}),e.wrongSimsMongo=[],e.getDistributors(),e.$emit("setSelectedDistributor",null),e.newNumbers="",e.$emit("setShowNumbersSpinner",!1),e.$emit("setSims",null),s.data.not_registered_sims.length>0&&(e.wrongSims=s.data.not_registered_sims)):1003===s.data.message.code?(e.wrongSimsMongo=s.data.writeErrors,e.newNumbers="",r.$emit("setShowNumbersSpinner",!1),e.$bvModal.msgBoxOk("Números guardados correctamente. Se encontraron números que ya están en la base de datos. Se mostrarán al cerrar esta ventana.",{title:"Éxito",size:"lg",buttonSize:"lg",okVariant:"success"})):"Access token expired"===s.data.message?(e.showDistributorSpinner=!1,e.$bvModal.msgBoxOk("Sesión expirada. Vuelve a iniciar sesión.",{title:"Error",size:"lg",buttonSize:"lg",okVariant:"success"}).then((function(t){t&&(e.$router.push("/login"),l.logOut(),e.$emit("setShowNumbersSpinner",!1),e.$emit("setSims",null))}))):(e.$emit("setShowNumbersSpinner",!1),U.error(t,"Ocurrió un error al guardar. Intenta de nuevo"),e.$emit("setSims",null))})).catch((function(e){r.$emit("setShowNumbersSpinner",!1),this.$emit("setSims",null),U.error(t,"Error al conectarse al servidor "+e)}))}else this.$emit("setSims",null),this.$bvModal.msgBoxOk("Debes elegir un distribuidor",{title:"Error",size:"lg",buttonSize:"lg",okVariant:"success"})},clearErrorArea:function(){this.wrongSimsMongo=[]}})}),oe=se,ie=Object(m["a"])(oe,te,re,!1,null,null,null),ne=ie.exports,ae={name:"Home",components:{DistributorForm:G,DistributorDetails:K,NumbersList:ee,NumbersTextArea:ne},data:function(){return{selectedDistributor:null,selectedSims:null,showForm:!1,showDistributorSpinner:!1,showNumbersSpinner:!1,result:{activatedSims:0,notActivatedSims:0},generatingGeneralReport:!1}},methods:Object(w["a"])(Object(w["a"])({},Object(D["b"])(["getDistributors"])),{},{toggleForm:function(){this.showForm||(this.selectedDistributor=null),this.showForm=!this.showForm},formatDate:function(e){var t=new Date(e);return t.toLocaleString()},setSelectedDistributor:function(e){this.selectedDistributor=e},setShowNumbersSpinner:function(e){this.showNumbersSpinner=e},setSims:function(e){this.selectedSims=e},getGeneralReport:function(){var e=this,t=this;this.generatingGeneralReport=!0;var r={headers:{Authorization:"Bearer "+l.getters.getAccessToken()}};y.a.get(R.getSIMsGeneralReport,r).then((function(t){e.result=t.data.result,e.generatingGeneralReport=!1,e.$bvModal.show("bv-modal-general-report")})).catch((function(e){t.generatingGeneralReport=!1,U.error(e)}))},getDistributorSims:function(e){var t=this;if(null!==e){var r=R.getConfig();y.a.get(R.distributorSims+"/"+e._id,r).then((function(e){t.selectedSims=e.data.data})).catch((function(e){U.error(e)}))}else this.selectedSims=null}}),mounted:function(){this.getDistributors(this.$bvModal)},computed:Object(w["a"])(Object(w["a"])({},Object(D["c"])(["distributorsList"])),{},{distributors:function(){var e=[{value:null,text:"Elije un distribuidor"}];return void 0!==this.distributorsList&&this.distributorsList.forEach((function(t){e.push({value:t,text:t.name})})),e}})},le=ae,ue=Object(m["a"])(le,_,S,!1,null,null,null),ce=ue.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-row",[e.showSpinner?r("b-col",{staticClass:"col-md-4 col-lg-4 col-xl-4 col-sm-10 offset-sm-1 offset-md-4 offset-lg-4 offset-xl-4"},[r("div",{staticClass:"text-center"},[r("b-spinner",{staticClass:"text-center",attrs:{variant:"primary",type:"grow",label:"Spinning"}}),r("h3",[e._v("Iniciando sesión")])],1)]):e._e(),e.showSpinner?e._e():r("b-col",{staticClass:"col-md-4 col-lg-4 col-xl-4 col-sm-10 offset-sm-1 offset-md-4 offset-lg-4 offset-xl-4"},[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("b-form-group",{attrs:{id:"input-group-email",label:"Correo electrónico:","label-for":"email-input"}},[r("b-form-input",{attrs:{id:"email-input",type:"email",required:"",placeholder:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("b-form-group",{attrs:{id:"input-group-password",label:"Ingrese Contraseña:","label-for":"password-input"}},[r("b-form-input",{attrs:{id:"password-input",type:"password",required:"",placeholder:"Contraseña"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("b-button",{attrs:{type:"submit",variant:"primary"}},[e._v("Login")])],1)],1)],1)],1)],1)},be=[],de={data:function(){return{form:{email:"",password:""},showSpinner:!1}},methods:{onSubmit:function(){this.showSpinner=!0,this.login(this.form)},login:function(){var e=this,t=this.$bvModal;y.a.post(R.loginUrl,this.form).then((function(t){2001===t.data.message.code?(l.setters.setAccessToken(t.data.token),e.$router.push("/")):1e3===t.data.code&&(e.$bvModal.msgBoxOk("Usuario o contraseña incorrectas",{title:"Error al iniciar sesión",size:"lg",buttonSize:"lg",okVariant:"success"}),e.showSpinner=!1,e.form={email:"",password:""})})).catch((function(e){t.msgBoxOk("Error al conectarse al servidor "+e,{title:"Error",size:"lg",buttonSize:"lg",okVariant:"danger"})}))}},beforeMount:function(){void 0!==localStorage.simAccessToken&&this.$router.push("/")}},pe=de,ge=Object(m["a"])(pe,me,be,!1,null,null,null),ve=ge.exports;s["default"].use(h["a"]);var fe=[{path:"/",name:"Home",component:ce,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:ve}],he=new h["a"]({mode:"history",base:"/",routes:fe});he.beforeEach((function(e,t,r){e.meta.requiresAuth&&void 0===localStorage.simAccessToken?r("/Login"):r()}));var _e=he,Se={distributorsList:[],selectedDistributorOnState:null},we={commitDistributorsList:function(e,t){e.distributorsList=t},commitDistributor:function(e,t){e.selectedDistributorOnState=t}},De={getDistributors:function(e,t){var r=e.commit,s=R.getConfig();y.a.get(R.distributorsUrl,s).then((function(e){"Access token expired"===e.data.message&&(l.logOut(),_e.push("/login")),r("commitDistributorsList",e.data.data)})).catch((function(e){t.msgBoxOk("Error al conectarse al servidor "+e,{title:"Error",size:"lg",buttonSize:"lg",okVariant:"danger"})}))},setDistributor:function(e,t){var r=e.commit;r("commitDistributor",t)}};s["default"].use(D["a"]);var xe=new D["a"].Store({state:Se,mutations:we,actions:De}),ye=r("5f5b"),ke=r("b1e0");r("f9e3"),r("2dd8");s["default"].use(ye["a"]),s["default"].use(ke["a"]),s["default"].config.productionTip=!1,new s["default"]({router:_e,store:xe,render:function(e){return e(f)}}).$mount("#app")},"85ec":function(e,t,r){},bd3c:function(e,t,r){e.exports=r.p+"img/telcel.7f7874c2.png"}});
//# sourceMappingURL=app.b2e8db6d.js.map